{% extends 'base.html' %}

{% block content %}
    <section id="recipe" class="uk-container">
        <h1 class="uk-text-bold uk-text-center">{{ recipe.recipe_data.title|title }}</h1>
        <div class="uk-margin-medium" uk-grid>
            
            <!-- Recipe Image -->
            <div class="uk-text-center uk-inline uk-width-1-3@m">
                <img height="400" width="375" src="{{ recipe.image_details[0] }}" alt="{{ recipe.image_details[1] }}">
                <p><span class="card-lead-text">Author:</span>{{ recipe.recipe_data.author }}</p>
            </div>

            <!-- Details -->
            <div class="uk-padding-bottom uk-inline uk-width-2-3@m">
                <p class="uk-text-lead">{{ recipe.recipe_data.description }}</p>
                <span class="cuisine-badge">{{ recipe.recipe_filters.cuisine|title }}</span>

                <!-- Nutrition Table -->
                <div class="uk-margin-medium uk-overflow-auto">
                    <table class="uk-table uk-table-divider uk-table-striped uk-table-small uk-table-justify">
                        <caption class="uk-text-bold">Nutrition</caption>
                        <thead>
                            <tr>
                                {% for item in recipe.nutrition %}
                                    <th class="uk-text-bold">{{ item[0] }}</th>
                                {% endfor %}
                            </tr>
                        </thead>
                        <tbody>
                            <tr>
                                {% for item in recipe.nutrition %}
                                    <th class="uk-text-emphasis">{{ item[1] }}</th>
                                {% endfor %}
                            </tr>
                        </tbody>
                    </table>
                </div>
                
                <!-- Cook / Prep Time -->
                <p class="slider-icons">
                    <span class="uk-text-nowrap"><i uk-icon="icon: bell"></i> {{ recipe.recipe_data.cook_time  }} </span>
                    <span class="uk-text-nowrap"><i uk-icon="icon: bolt"></i> {{ recipe.recipe_data.prep_time }}</span>
                </p>                

                <!-- Tags -->
                <p>
                    <span class="card-lead-text"><i uk-icon="icon: tag"></i> Tags:</span>
                    {% for key, value in recipe.recipe_filters.items() %}
                        {% if key in ['planning', 'mood', 'diet', 'skill', 'cuisine'] and value != "" %}
                            <a class="tags uk-text-nowrap" href="{{ url_for('categories', category=key, data=value) }}"><i uk-icon="icon: hashtag"></i>{{ value }}</a>
                        {% endif %}
                    {% endfor %}
                </p>
                

                <!-- Iconnav -->
                <div class="uk-margin-top uk-position-bottom-right">
                    <ul class="uk-iconnav">
                        <li  uk-tooltip="title: Edit; pos: top-right"><a href="#" uk-icon="icon: file-edit"> Edit </a></li>
                        <li  uk-tooltip="title: Like; pos: top-right"><a href="#" uk-icon="icon: heart"> {{ recipe.users.likes }} </a></li>
                        <li  uk-tooltip="title: Dislike; pos: top-right"><a href="#" uk-icon="icon: trash">  {{ recipe.users.dislikes }} </a></li>
                        <li  uk-tooltip="title: Comments; pos: top-right"><a href="#comments" uk-icon="icon: comments" uk-scroll>  {{ recipe.users.comments|count }} </a></li>
                    </ul>
                </div>
            </div>
        </div>


        <!-- Lists -->
        <div id="recipe-lists" class="uk-text-left uk-margin-large" uk-grid>
            
            <!-- Ingredients -->
            <div class="uk-inline uk-width-1-3@l">
                <h3>Ingredients</h3>
                <ul class="uk-list uk-list-bullet">
                    {% for v in recipe.ingredients %}
                    <li> {{ v }}</li>
                    {% endfor %}
                </ul>
            </div>
            
            <!-- Methods -->
            <div class="uk-inline uk-width-2-3@l">
                <h3>Preparation</h3>
                <p>{{ recipe.recipe_data.serves }}</p>
                <ol class="uk-list uk-list-divider">
                    {% for v in recipe.methods %}
                    <li> {{ v }}</li>
                    {% endfor %}
                </ol>
            </div>
        </div>

        
    </section>


    <!-- Comments -->
    <section id="comments" class="uk-container uk-margin-large">
        <h2>Comments</h2>
        <p>Have your say about this recipe!</p>

        <!-- Placeholder if no comments exist -->
        {% if not recipe.users.comments %}
            <div class="uk-placeholder uk-text-center uk-padding-large uk-margin-medium">
                <p>Such Empty, No Comments Yet!</p>
            </div>
        {% else %}
            {% for comment in recipe.users.comments %}
                {% include 'partials/_comments.html' %}
            {% endfor %}
        {% endif%}
    </section>
{% endblock %}